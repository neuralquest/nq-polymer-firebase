<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="nq-view-data.html">
<link rel="import" href="../bower_components/polymerfire/firebase-document.html">

<!--
`my-blank-element`
yes

@demo demo/index.html
-->

<dom-module id="nq-form">
    <template>
        <style>
            :host {
                --app-primary-color: #4285f4;
                --app-secondary-color: black;

                display: block;
            }

        </style>

        <nq-view-data view-id="{{viewId}}" view-doc="{{viewDoc}}"></nq-view-data>

        <!--<firebase-document
                path="/documents/[[docIdComputed]]"
                data="{{doc}}">
        </firebase-document>


        <firebase-document
                path="/documents/{{viewId}}"
                data="{{view}}">
        </firebase-document>-->

        <!-- Only one tab, so no tab bar -->
        <template is="dom-repeat" items="{{viewDoc.properties)}}" as="prop">
            <div>{{prop.name}}</div>
        </template>
    </template>

    <script>
        Polymer({

            is: 'nq-form',

            properties: {
                level: Number,
                viewId: String,
                docId: String,
                viewDoc:{
                    type:Object,
                    value: function() { return {}; },
                    //observer: 'dataChanged'
                }
            },
            _toArray: function(obj) {
                if(!obj) return [];
                var arr =  Object.keys(obj).map(function(key) {
                    return {
                        name: key,
                        value: obj[key]
                    };
                });
                return arr;
            },
            dataChanged: function(newValue, oldValue) {
                console.log('view:', newValue);
            }
        });
    </script>
</dom-module>